(function(v,w){angular.module("adf",["adf.provider","adf.locale","ui.bootstrap"]).value("adfTemplatePath","../src/templates/").value("rowTemplate",'<adf-dashboard-row row="row" adf-model="adfModel" options="options" edit-mode="editMode" ng-repeat="row in column.rows" />').value("columnTemplate",'<adf-dashboard-column column="column" adf-model="adfModel" options="options" edit-mode="editMode" ng-repeat="column in row.columns" />').value("adfVersion","0.13.0-SNAPSHOT");angular.module("adf").run(["$templateCache",
function(a){a.put("../src/templates/dashboard-column.html",'<div adf-id={{column.cid}} class=column ng-class=column.styleClass ng-model=column.widgets> <adf-widget ng-repeat="definition in column.widgets" adf-model=adfModel definition=definition column=column edit-mode=editMode options=options widget-state=widgetState>  </adf-widget></div> ');a.put("../src/templates/dashboard-edit.html",'<div class=modal-header> <button type=button class=close ng-click=closeDialog() aria-hidden=true>&times;</button> <h4 class=modal-title ng-bind="translate(\'ADF_COMMON_EDIT_DASHBOARD\')">Edit Dashboard</h4> </div> <div class=modal-body> <form role=form> <div class=form-group> <label for=dashboardTitle ng-bind="translate(\'ADF_COMMON_TITLE\')">Title</label> <input type=text class=form-control id=dashboardTitle ng-model=copy.title required> </div> <div class=form-group> <label ng-bind="translate(\'ADF_EDIT_DASHBOARD_STRUCTURE_LABEL\')">Structure</label> <div class=row ng-init="splitted = split(structures, 3)"> <div class=col-lg-4 ng-repeat="structureColumn in splitted"> <div class=radio ng-repeat="(key, structure) in structureColumn"> <div class=row> <div class=col-sm-2> <label> <input type=radio value={{key}} ng-model=model.structure ng-change="changeStructure(key, structure)"> </label> </div> <div class=col-sm-9 ng-click="changeStructure(key, structure)"> <adf-structure-preview name=key structure=structure selected="model.structure == key"> </adf-structure-preview> </div> </div> </div> </div> </div> </div> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=closeDialog() ng-bind="translate(\'ADF_COMMON_CLOSE\')">Close</button> </div> ');
a.put("../src/templates/dashboard-row.html","<div class=row ng-class=row.styleClass ng-style=row.style>  </div> ");a.put("../src/templates/dashboard-title.html",'<h1 style=\'min-height:10px\'> {{model.title}} <span style="font-size: 16px" class=pull-right> <a href ng-if=editMode title="{{ translate(\'ADF_DASHBOARD_TITLE_TOOLTIP_ADD\') }}" ng-click=addWidgetDialog()> <i class="glyphicon glyphicon-plus-sign"></i> </a> <a href ng-if=editMode title="{{ translate(\'ADF_COMMON_EDIT_DASHBOARD\') }}" ng-click=editDashboardDialog()> <i class="glyphicon glyphicon-cog"></i> </a> <a href ng-if=options.editable title="{{editMode ? translate(\'ADF_DASHBOARD_TITLE_TOOLTIP_SAVE\') : translate(\'ADF_DASHBOARD_TITLE_TOOLTIP_EDIT_MODE\') }}" ng-click=toggleEditMode()> <i class=glyphicon x-ng-class="{\'glyphicon-edit\' : !editMode, \'glyphicon-save\' : editMode}"></i> <span ng-if=!editMode>S\u1eeda b\u1ea3ng \u0111i\u1ec1u khi\u1ec3n</span> </a> <a href ng-if=editMode title="{{ translate(\'ADF_DASHBOARD_TITLE_TOOLTIP_UNDO\') }}" ng-click=cancelEditMode()> <i class="glyphicon glyphicon-repeat adf-flip"></i> </a> </span> </h1> ');
a.put("../src/templates/dashboard.html",'<div class=dashboard-container> <div ng-include src=model.titleTemplateUrl></div> <div class=dashboard x-ng-class="{\'edit\' : editMode}"> <adf-dashboard-row row=row adf-model=model options=options ng-repeat="row in model.rows" edit-mode=editMode continuous-edit-mode=continuousEditMode> </adf-dashboard-row></div> </div> ');a.put("../src/templates/structure-preview.html",'<div class=structure-preview ng-class="{selected: selected}"> <h4>{{name}}</h4> <adf-dashboard-row ng-repeat="row in preview.rows" row=row> </adf-dashboard-row></div> ');
a.put("../src/templates/widget-add.html",'<div class=modal-header> <button type=button class=close ng-click=closeDialog() aria-hidden=true>&times;</button> <h4 class=modal-title ng-bind="translate(\'ADF_WIDGET_ADD_HEADER\')">Add new widget</h4> </div> <div class=modal-body>  <div ng-if=createCategories> <uib-accordion ng-init="categorized = createCategories(widgets)"> <uib-accordion-group heading={{category.name}} ng-repeat="category in categorized | adfOrderByObjectKey: \'name\'"> <dl class=dl-horizontal> <dt ng-repeat-start="widget in category.widgets | adfOrderByObjectKey: \'key\'"> <a href ng-click=addWidget(widget.key)> {{widget.title}} </a> </dt> <dd ng-repeat-end ng-if=widget.description> {{widget.description}} </dd> </dl> </uib-accordion-group> </uib-accordion> </div>  <div style="display: inline-block;" ng-if=!createCategories> <dl class=dl-horizontal> <dt ng-repeat-start="widget in widgets | adfOrderByObjectKey: \'key\'"> <a href ng-click=addWidget(widget.key)> {{widget.title}} </a> </dt> <dd ng-repeat-end ng-if=widget.description> {{widget.description}} </dd> </dl> </div> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=closeDialog() ng-bind="translate(\'ADF_COMMON_CLOSE\')">Close</button> </div> ');
a.put("../src/templates/widget-delete.html",'<div class=modal-header> <h4 class=modal-title><span ng-bind="translate(\'ADF_COMMON_DELETE\')">Delete</span> {{widget.title}}</h4> </div> <div class=modal-body> <form role=form> <div class=form-group> <label for=widgetTitle ng-bind="translate(\'ADF_WIDGET_DELETE_CONFIRM_MESSAGE\')">Are you sure you want to delete this widget ?</label> </div> </form> </div> <div class=modal-footer> <button type=button class="btn btn-default" ng-click=closeDialog() ng-bind="translate(\'ADF_COMMON_CLOSE\')">Close</button> <button type=button class="btn btn-primary" ng-click=deleteDialog() ng-bind="translate(\'ADF_COMMON_DELETE\')">Delete</button> </div> ');
a.put("../src/templates/widget-edit.html",'<form name=widgetEditForm novalidate role=form ng-submit=saveDialog()> <div class=modal-header> <button type=button class=close ng-click=closeDialog() aria-hidden=true>&times;</button> <h4 class=modal-title>{{widget.title}}</h4> </div> <div class=modal-body> <div class="alert alert-danger" role=alert ng-show=validationError> <strong>Apply error:</strong> {{validationError}} </div> <div class=form-group> <label for=widgetTitle ng-bind="translate(\'ADF_COMMON_TITLE\')">Title</label> <input type=text class=form-control id=widgetTitle ng-model=definition.title placeholder="Enter title" required> </div> <div ng-if=widget.edit> <adf-widget-content adf-model=adfModel model=definition content=widget.edit> </adf-widget-content></div> </div> <div class=modal-footer> <button type=button class="btn btn-default" ng-click=closeDialog() ng-bind="translate(\'ADF_COMMON_CANCEL\')">Cancel</button> <input type=submit class="btn btn-primary" ng-disabled=widgetEditForm.$invalid ng-value="translate(\'ADF_COMMON_APPLY\')"> </div> </form> ');
a.put("../src/templates/widget-fullscreen.html",'<div class=modal-header> <div class="pull-right widget-icons"> <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_REFRESH\') }}" ng-if=widget.reload ng-click=reload()> <i class="glyphicon glyphicon-refresh"></i> </a> <a href title=close ng-click=closeDialog()> <i class="glyphicon glyphicon-remove"></i> </a> </div> <h4 class=modal-title>{{definition.title}}</h4> </div> <div class=modal-body> <adf-widget-content adf-model=adfModel model=definition content=widget> </adf-widget-content></div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=closeDialog() ng-bind="translate(\'ADF_COMMON_CLOSE\')">Close</button> </div> ');
a.put("../src/templates/widget-title.html",'<h3 class=panel-title> {{definition.title}} <span class=pull-right> <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_REFRESH\') }}" ng-if=widget.reload ng-click=reload()> <i class="glyphicon glyphicon-refresh"></i> </a>  <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_MOVE\') }}" class=adf-move ng-if=editMode> <i class="glyphicon glyphicon-move"></i> </a>  <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_COLLAPSE\') }}" ng-show="options.collapsible && !widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"> <i class="glyphicon glyphicon-minus"></i> </a>  <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_EXPAND\') }}" ng-show="options.collapsible && widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"> <i class="glyphicon glyphicon-plus"></i> </a>  <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_EDIT\') }}" ng-click=edit() ng-if=editMode> <i class="glyphicon glyphicon-cog"></i> </a> <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_FULLSCREEN\') }}" ng-click=openFullScreen() ng-show=options.maximizable> <i class="glyphicon glyphicon-fullscreen"></i> </a>  <a href title="{{ translate(\'ADF_WIDGET_TOOLTIP_REMOVE\') }}" ng-click=remove() ng-if=editMode> <i class="glyphicon glyphicon-remove"></i> </a> </span> </h3> ');
a.put("../src/templates/widget.html",'<div adf-id={{definition.wid}} adf-widget-type={{definition.type}} ng-class="widgetClasses(widget, definition)" class=widget> <div class="panel-heading clearfix" ng-if="!widget.frameless || editMode"> <div ng-include src=definition.titleTemplateUrl></div> </div> <div ng-class="{\'panel-body\':!widget.frameless || editMode}" uib-collapse=widgetState.isCollapsed> <adf-widget-content adf-model=adfModel model=definition content=widget> </adf-widget-content></div> </div> ')}]);
angular.module("adf").factory("widgetService",["$http","$q","$sce","$templateCache","dashboard",function(a,h,m,f,q){function b(e){var b=e;0<=e.indexOf("{widgetsPath}")&&(b=e.replace("{widgetsPath}",q.widgetsPath).replace("//","/"),0===b.indexOf("/")&&(b=b.substring(1)));return b}return{getTemplate:function(e){var p=h.defer();if(e.template)p.resolve(e.template);else if(e.templateUrl){var l=f.get(e.templateUrl);l?p.resolve(l):(l=m.getTrustedResourceUrl(b(e.templateUrl)),a.get(l).then(function(b){return b.data}).then(function(b){f.put(e.templateUrl,
b);p.resolve(b)}).catch(function(){p.reject("could not load template")}))}return p.promise}}}]);angular.module("adf").factory("adfUtilsService",function(){return{stringToBoolean:function(a){switch(angular.isString(a)?a.toLowerCase():null){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;default:return!!a}},split:function(a,h){var m=[],f=0;angular.forEach(a,function(a,b){var e=f++%h;m[e]||(m[e]={});m[e][b]=a});return m}}});angular.module("adf").factory("adfStructurePreviewService",
function(){function a(h){if(h.rows&&0<h.rows.length){var m=100/h.rows.length;angular.forEach(h.rows,function(f){f.style={height:m+"%"};f.columns&&angular.forEach(f.columns,function(f){a(f)})})}}return{adjustRowHeight:a}});angular.module("adf").factory("adfDashboardService",["$log","dashboard","$rootScope",function(a,h,m){function f(b,e,a){a=a||0;angular.isDefined(b.rows)&&angular.forEach(b.rows,function(b){angular.forEach(b.columns,function(b){b.widgets||(b.widgets=[]);if(angular.isDefined(e[a])&&
angular.isUndefined(b.rows)){var c=e[a];if(c.widgets&&0<c.widgets.length)for(var k=c.widgets.shift();k;)b.widgets.push(k),k=c.widgets.shift();a++}a=f(b,e,a)})});return a}function q(b,a){a=a||[];angular.isDefined(b.rows)&&angular.forEach(b.rows,function(b){angular.forEach(b.columns,function(b){b.hasOwnProperty("rows")||a.push(b);q(b,a)})});return a}return{changeStructure:function(b,a){var e=q(b),l=0;for(b.rows=angular.copy(a.rows);l<e.length;)l=f(b,e,l)},createConfiguration:function(b){var a={};(b=
h.widgets[b].config)&&(a=angular.copy(b));return a},addNewWidgetToModel:function(b,e,f){if(b){var l;l=null;if(angular.isArray(b.rows))for(var h=0;h<b.rows.length;h++){var c=b.rows[h];if(angular.isArray(c.columns))for(var k=0;k<c.columns.length;k++){var d=c.columns[k];if(!d.rows){l=d;break}}if(l)break}else a.error("model does not have any rows"),l=null;l?(l.widgets||(l.widgets=[]),l.widgets.unshift(e),m.$broadcast("adfWidgetAdded",f,b,e)):a.error("could not find first widget column")}else a.error("model is undefined")},
isEditModeImmediate:function(b){return(b=h.widgets[b])&&b.edit&&b.edit.immediate},createCategories:function(b){var a={};angular.forEach(b,function(b,e){var f=b.category;f||(f="Miscellaneous");angular.isUndefined(a[f])&&(a[f]={widgets:{}});a[f].widgets[e]=b});return a},_tests:{_readColumns:q}}}]);angular.module("adf").directive("adfWidget",["$injector","$q","$log","$uibModal","$rootScope","dashboard","adfTemplatePath",function(a,h,m,f,q,b,e){function p(c){var a=c.definition;c.translate=b.translate;
if(a){var d=b.widgets[a.type];d?(a.title||(a.title=d.title),a.titleTemplateUrl||(a.titleTemplateUrl=e+"widget-title.html",d.titleTemplateUrl&&(a.titleTemplateUrl=d.titleTemplateUrl)),a.editTemplateUrl||(a.editTemplateUrl=e+"widget-edit.html",d.editTemplateUrl&&(a.editTemplateUrl=d.editTemplateUrl)),a.titleTemplateUrl||(a.frameless=d.frameless),a.styleClass||(a.styleClass=d.styleClass),a.wid||(a.wid=b.id()),c.widget=angular.copy(d),(a=a.config)?angular.isString(a)&&(a=angular.fromJson(a)):a={},c.config=
a,c.widgetState||(c.widgetState={},c.widgetState.isCollapsed=!0===d.collapsed?d.collapsed:!1)):m.warn("could not find widget "+a.type)}else m.debug("definition not specified, widget was probably removed")}function l(c,k){var d=c.definition;if(d){var g=function(){var a=c.col;if(a){var b=a.widgets.indexOf(d);0<=b&&a.widgets.splice(b,1)}k.remove();q.$broadcast("adfWidgetRemovedFromColumn",d)};c.remove=function(){if(c.options.enableConfirmDelete){var a=c.$new();a.translate=b.translate;var n=e+"widget-delete.html";
d.deleteTemplateUrl&&(n=d.deleteTemplateUrl);var k=f.open({scope:a,templateUrl:n,windowClass:"adf-remove-widget-modal",backdrop:"static",size:"md"});a.closeDialog=function(){k.close();a.$destroy()};a.deleteDialog=function(){g();a.closeDialog()}}else g()};c.reload=function(){c.$broadcast("widgetReload")};c.edit=function(){function g(a){if("boolean"===typeof a){var c=h.defer();a?c.resolve():c.reject();a=c.promise}else a=h.when(a);return a}var n=c.$new();n.translate=b.translate;n.definition=angular.copy(d);
var k=e+"widget-edit.html";d.editTemplateUrl&&(k=d.editTemplateUrl);var u=f.open({scope:n,templateUrl:k,windowClass:"adf-edit-widget-modal",backdrop:"static",size:"md"});n.closeDialog=function(){u.close();n.$destroy()};n.saveDialog=function(){n.validationError=null;var b=c.widget,k;k=b.edit?b.edit.apply:function(){return!0};k=a.invoke(k,k,{widget:b,definition:n.definition,config:n.definition.config});g(k).then(function(){d.title=n.definition.title;angular.extend(d.config,n.definition.config);b.edit&&
b.edit.reload&&c.$broadcast("widgetConfigChanged");n.closeDialog()},function(a){n.validationError=a?a:"Validation durring apply failed"})}}}else m.debug("widget not found")}function t(a){a.$on("adfDashboardCollapseExpand",function(b,c){a.widgetState.isCollapsed=c.collapseExpandStatus});a.$on("adfWidgetEnterEditMode",function(c,d){b.idEquals(a.definition.wid,d.wid)&&a.edit()});a.widgetClasses=function(b,c){c=c.styleClass||"";b&&b.frameless&&!a.editMode||(c+=" panel panel-default");return c};a.openFullScreen=
function(){var b=a.definition,c=a.$new(),g=f.open({scope:c,templateUrl:e+"widget-fullscreen.html",size:b.modalSize||"lg",backdrop:"static",windowClass:b.fullScreen?"dashboard-modal widget-fullscreen":"dashboard-modal"});c.closeDialog=function(){g.close();c.$destroy()}}}t.$inject=["$scope"];return{replace:!0,restrict:"EA",transclude:!1,templateUrl:b.customWidgetTemplatePath?b.customWidgetTemplatePath:e+"widget.html",scope:{adfModel:"=",definition:"=",col:"=column",editMode:"=",options:"=",widgetState:"="},
controller:t,compile:function(){return{pre:p,post:l}}}}]);angular.module("adf").directive("adfWidgetContent",["$log","$q","widgetService","$compile","$controller","$injector","dashboard",function(a,h,m,f,q,b,e){function p(b,k){a.warn(k);b.html(e.messageTemplate.replace(/{}/g,k))}function l(a,b,d){var c=a.model,r=a.content,n=d;c?r?n=t(a,b,d,c,r):p(b,"widget content is undefined, please have a look at your browser log"):p(b,"model is undefined");return n}function t(a,k,d,g,r){k.html(e.loadingTemplate);
var c=a.$new();g.config||(g.config={});c.config=g.config;var l={$scope:c,widget:g,config:g.config},u={};u.$tpl=m.getTemplate(r);r.resolve&&angular.forEach(r.resolve,function(a,c){angular.isString(a)?u[c]=b.get(a):u[c]=b.invoke(a,a,l)});h.all(u).then(function(a){angular.extend(a,l);r.resolveAs&&(c[r.resolveAs]=a);k.html(a.$tpl);r.controller&&(a=q(r.controller,a),r.controllerAs&&(c[r.controllerAs]=a),k.children().data("$ngControllerController",a));f(k.contents())(c)},function(a){var b="Could not resolve all promises";
a&&(b+=": "+a);p(k,b)});d&&d.$destroy();return c}return{replace:!0,restrict:"EA",transclude:!1,scope:{adfModel:"=",model:"=",content:"="},link:function(a,b){var c=l(a,b,null);a.$on("widgetConfigChanged",function(){c=l(a,b,c)});a.$on("widgetReload",function(){c=l(a,b,c)})}}}]);angular.module("adf").directive("adfStructurePreview",["adfTemplatePath","adfStructurePreviewService",function(a,h){return{restrict:"E",replace:!0,scope:{name:"=",structure:"=",selected:"="},templateUrl:a+"structure-preview.html",
link:function(a){var f=angular.copy(a.structure);h.adjustRowHeight(f);a.preview=f}}}]);angular.module("adf").directive("adfDashboard",["$rootScope","$log","$timeout","$uibModal","dashboard","adfTemplatePath","adfDashboardService","adfUtilsService",function(a,h,m,f,q,b,e,p){function l(a,b){m(function(){a.$broadcast("adfWidgetEnterEditMode",b)},200)}function t(c){function k(){var a=c.$new();a.translate=q.translate;return a}var d={},g={},r=null,n={},m=c.name;c.$watch("adfModel",function(a,e){if(null!==
e||null===a&&null===e)d=c.adfModel,r=c.adfWidgetFilter,d&&d.rows||(n=c.structure,(g=q.structures[n])?(d?d.rows=angular.copy(g).rows:d=angular.copy(g),d.structure=n):h.error("could not find structure "+n)),d?(d.title||(d.title="Dashboard"),d.titleTemplateUrl||(d.titleTemplateUrl=b+"dashboard-title.html"),c.model=d):h.error("could not find or create model")},!0);c.editMode=!1;c.editClass="";c.translate=q.translate;c.toggleEditMode=function(){c.editMode=!c.editMode;c.editMode&&!c.continuousEditMode&&
(c.modelCopy=angular.copy(c.adfModel,{}),a.$broadcast("adfIsEditMode"));c.editMode||a.$broadcast("adfDashboardChanged",m,d)};c.$on("adfToggleEditMode",function(){c.toggleEditMode()});c.collapseAll=function(b){a.$broadcast("adfDashboardCollapseExpand",{collapseExpandStatus:b})};c.cancelEditMode=function(){c.editMode=!1;c.continuousEditMode||(c.modelCopy=angular.copy(c.modelCopy,c.adfModel));a.$broadcast("adfDashboardEditsCancelled")};c.editDashboardDialog=function(){var a=k();a.copy={title:d.title};
a.structures=q.structures;a.split=p.split;var c=b+"dashboard-edit.html";d.editTemplateUrl&&(c=d.editTemplateUrl);var g=f.open({scope:a,templateUrl:c,backdrop:"static",windowClass:"adf-edit-dashboard-modal",size:"md"});a.changeStructure=function(a,b){h.info("change structure to "+a);e.changeStructure(d,b);d.structure!==a&&(d.structure=a)};a.closeDialog=function(){d.title=a.copy.title;g.close();a.$destroy()}};c.addWidgetDialog=function(){var a=k(),d=c.model,g;angular.isFunction(r)?(g={},angular.forEach(q.widgets,
function(a,b){r(a,b,d)&&(g[b]=a)})):g=q.widgets;a.widgets=g;a.translate=c.translate;c.options.categories&&(c.createCategories=e.createCategories);var n=b+"widget-add.html";d.addTemplateUrl&&(n=d.addTemplateUrl);var h=f.open({scope:a,templateUrl:n,windowClass:"adf-add-widget-modal",backdrop:"static",size:"md"});a.addWidget=function(b){var g={type:b,config:e.createConfiguration(b)};e.addNewWidgetToModel(d,g,m);h.close();a.$destroy();e.isEditModeImmediate(b)&&l(c,g)};a.closeDialog=function(){h.close();
a.$destroy()}};c.addNewWidgetToModel=e.addNewWidgetToModel}t.$inject=["$scope"];return{replace:!0,restrict:"EA",transclude:!1,scope:{structure:"@",name:"@",collapsible:"@",editable:"@",editMode:"@",continuousEditMode:"=",maximizable:"@",adfModel:"=",adfWidgetFilter:"=",categories:"@"},controller:t,link:function(a,b,d){b={name:d.name,editable:!0,enableConfirmDelete:p.stringToBoolean(d.enableConfirmDelete),maximizable:p.stringToBoolean(d.maximizable),collapsible:p.stringToBoolean(d.collapsible),categories:p.stringToBoolean(d.categories)};
angular.isDefined(d.editable)&&(b.editable=p.stringToBoolean(d.editable));a.options=b},templateUrl:b+"dashboard.html"}}]);angular.module("adf").directive("adfDashboardRow",["$compile","adfTemplatePath","columnTemplate",function(a,h,m){return{restrict:"E",replace:!0,scope:{row:"=",adfModel:"=",editMode:"=",continuousEditMode:"=",options:"="},templateUrl:h+"dashboard-row.html",link:function(f,h){angular.isDefined(f.row.columns)&&angular.isArray(f.row.columns)&&a(m)(f,function(a){h.append(a)})}}}]);
angular.module("adf").directive("adfDashboardColumn",["$log","$compile","$rootScope","adfTemplatePath","rowTemplate","dashboard",function(a,h,m,f,q,b){function e(a,b,c){var d=b.widgets;a.$apply(function(){d.splice(c.newIndex,0,d.splice(c.oldIndex,1)[0]);m.$broadcast("adfWidgetMovedInColumn")})}function p(a,c){for(var d=null,g=0;g<a.widgets.length;g++){var e=a.widgets[g];if(b.idEquals(e.wid,c)){d=e;break}}return d}function l(a,c){for(var d=null,g=0;g<a.rows.length;g++){for(var e=a.rows[g],r=0;r<e.columns.length;r++){var f=
e.columns[r];if(b.idEquals(f.cid,c)){d=f;break}else f.rows&&(d=l(f,c))}if(d)break}return d}function t(a){return(a=a.getAttribute("adf-id"))?a:"-1"}function c(b,c,d,e){var g=t(e.from);if(c=l(c,g)){var g=t(e.item),f=p(c,g);f?b.$apply(function(){d.widgets||(d.widgets=[]);d.widgets.splice(e.newIndex,0,f);m.$broadcast("adfWidgetAddedToColumn")}):a.warn("could not find widget with id "+g)}else a.warn("could not find column with id "+g)}function k(a,b,c){a.$apply(function(){b.widgets.splice(c.oldIndex,1);
m.$broadcast("adfWidgetRemovedFromColumn")})}function d(a,b,d,f){var g=Sortable.create(b[0],{group:"widgets",handle:".adf-move",ghostClass:"placeholder",animation:150,onAdd:function(b){c(a,d,f,b)},onRemove:function(b){k(a,f,b)},onUpdate:function(b){e(a,f,b)}});b.on("$destroy",function(){g.el&&g.destroy()})}return{restrict:"E",replace:!0,scope:{column:"=",editMode:"=",continuousEditMode:"=",adfModel:"=",options:"="},templateUrl:f+"dashboard-column.html",link:function(a,c){var g=a.column;g.cid||(g.cid=
b.id());angular.isDefined(g.rows)&&angular.isArray(g.rows)?h(q)(a,function(a){c.append(a)}):d(a,c,a.adfModel,g)}}}]);angular.module("adf").filter("adfOrderByObjectKey",["$filter",function(a){return function(h,m){var f=[];angular.forEach(h,function(a,b){a[m]=b;f.push(a)});return a("orderBy")(f,m)}}]);angular.module("adf.provider",["adf.locale"]).provider("dashboard",["adfLocale",function(a){function h(){return d}function m(){return k}function f(a){var b=d[k][a];return b?b:a}var q={},b="",e={},p='<div class="alert alert-danger">{}</div>',
l='      <div class="progress progress-striped active">\n        <div class="progress-bar" role="progressbar" style="width: 100%">\n          <span class="sr-only">loading ...</span>\n        </div>\n      </div>',t=null,c=function(){return!0},k=a.defaultLocale,d=a.frameworkLocales;this.widget=function(a,b){b=angular.extend({reload:!1,frameless:!1},b);if(b.edit){var d={reload:!0,immediate:!1,apply:c};angular.extend(d,b.edit);b.edit=d}q[a]=b;return this};this.widgetsPath=function(a){b=a;return this};
this.structure=function(a,b){e[a]=b;return this};this.messageTemplate=function(a){p=a;return this};this.loadingTemplate=function(a){l=a;return this};this.customWidgetTemplatePath=function(a){t=a;return this};this.setLocale=function(a){if(d[a])k=a;else throw Error("Cannot set locale: "+a+". Locale is not defined.");return this};this.addLocale=function(a,b){if(!angular.isString(a))throw Error("locale must be an string");if(!angular.isObject(b))throw Error("translations must be an object");d[a]=b;return this};
this.$get=function(){var a=0;return{widgets:q,widgetsPath:b,structures:e,messageTemplate:p,loadingTemplate:l,setLocale:this.setLocale,locales:h,activeLocale:m,translate:f,customWidgetTemplatePath:t,id:function(){return(new Date).getTime()+"-"+ ++a},idEquals:function(a,b){return a&&b&&a.toString()===b.toString()}}}}]);angular.module("adf.locale",[]);angular.module("adf.locale").constant("adfLocale",{defaultLocale:"en-GB",frameworkLocales:{"en-GB":{ADF_COMMON_CLOSE:"Close",ADF_COMMON_DELETE:"Delete",
ADF_COMMON_TITLE:"Title",ADF_COMMON_CANCEL:"Cancel",ADF_COMMON_APPLY:"Apply",ADF_COMMON_EDIT_DASHBOARD:"Edit dashboard",ADF_EDIT_DASHBOARD_STRUCTURE_LABEL:"Structure",ADF_DASHBOARD_TITLE_TOOLTIP_ADD:"Add new widget",ADF_DASHBOARD_TITLE_TOOLTIP_SAVE:"Save changes",ADF_DASHBOARD_TITLE_TOOLTIP_EDIT_MODE:"Enable edit mode",ADF_DASHBOARD_TITLE_TOOLTIP_UNDO:"Undo changes",ADF_WIDGET_ADD_HEADER:"Add new widget",ADF_WIDGET_DELETE_CONFIRM_MESSAGE:"Are you sure you want to delete this widget ?",ADF_WIDGET_TOOLTIP_REFRESH:"Reload widget Content",
ADF_WIDGET_TOOLTIP_MOVE:"Change widget location",ADF_WIDGET_TOOLTIP_COLLAPSE:"Collapse widget",ADF_WIDGET_TOOLTIP_EXPAND:"Expand widget",ADF_WIDGET_TOOLTIP_EDIT:"Edit widget configuration",ADF_WIDGET_TOOLTIP_FULLSCREEN:"Fullscreen widget",ADF_WIDGET_TOOLTIP_REMOVE:"Remove widget"},"sv-SE":{ADF_COMMON_CLOSE:"St\u00e4ng",ADF_COMMON_DELETE:"Ta bort",ADF_COMMON_TITLE:"Titel",ADF_COMMON_CANCEL:"Avbryt",ADF_COMMON_APPLY:"Anv\u00e4nd",ADF_COMMON_EDIT_DASHBOARD:"Redigera dashboard",ADF_EDIT_DASHBOARD_STRUCTURE_LABEL:"Struktur",
ADF_DASHBOARD_TITLE_TOOLTIP_ADD:"L\u00e4gg till ny widget",ADF_DASHBOARD_TITLE_TOOLTIP_SAVE:"Spara f\u00f6r\u00e4ndringar",ADF_DASHBOARD_TITLE_TOOLTIP_EDIT_MODE:"Sl\u00e5 p\u00e5 redigeringsl\u00e4ge",ADF_DASHBOARD_TITLE_TOOLTIP_UNDO:"\u00c5ngra f\u00f6r\u00e4ndringar",ADF_WIDGET_ADD_HEADER:"L\u00e4gg till ny widget",ADF_WIDGET_DELETE_CONFIRM_MESSAGE:"\u00c4r du s\u00e4ker p\u00e5 att du vill ta bort denna widget ?",ADF_WIDGET_TOOLTIP_REFRESH:"Ladda om widget",ADF_WIDGET_TOOLTIP_MOVE:"\u00c4ndra widgets position",
ADF_WIDGET_TOOLTIP_COLLAPSE:"St\u00e4ng widget",ADF_WIDGET_TOOLTIP_EXPAND:"\u00d6ppna widget",ADF_WIDGET_TOOLTIP_EDIT:"\u00c4ndra widget konfigurering",ADF_WIDGET_TOOLTIP_FULLSCREEN:"Visa widget i fullsk\u00e4rm",ADF_WIDGET_TOOLTIP_REMOVE:"Ta bort widget"}}})})(window);
